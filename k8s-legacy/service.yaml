# Service: Stable network endpoint for pods
# Provides load balancing and service discovery
apiVersion: v1
kind: Service
metadata:
  name: flask-app
  namespace: flask-app
  labels:
    app: flask-gitops
    component: backend
spec:
  # Type of service
  # NodePort: Accessible on a static port on each node
  type: NodePort
  
  # Selector: Which pods to route traffic to
  selector:
    app: flask-gitops
    component: backend
  
  # Ports configuration
  ports:
  - name: http
    protocol: TCP
    port: 80          # Service port
    targetPort: 5000  # Container port
    nodePort: 30800   # External port (30000-32767)
  
  # Session affinity (optional)
  sessionAffinity: None
